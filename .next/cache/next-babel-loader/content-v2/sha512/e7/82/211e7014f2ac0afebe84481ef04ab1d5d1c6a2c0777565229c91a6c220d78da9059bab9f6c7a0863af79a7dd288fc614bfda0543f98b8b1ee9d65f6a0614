{"ast":null,"code":"import _regeneratorRuntime from \"/home/marlon/projetos/Ignite/03-NEXT/desafio/ignite-blog/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _toConsumableArray from \"/home/marlon/projetos/Ignite/03-NEXT/desafio/ignite-blog/node_modules/next/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _asyncToGenerator from \"/home/marlon/projetos/Ignite/03-NEXT/desafio/ignite-blog/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { format } from 'date-fns';\nimport ptBR from 'date-fns/locale/pt-BR';\nimport styles from './home.module.scss';\nimport { FiCalendar, FiUser } from 'react-icons/fi';\nimport Link from 'next/link';\nimport { useState } from 'react';\nexport var __N_SSG = true;\nexport default function Home(_ref) {\n  var postsPagination = _ref.postsPagination;\n  console.log({\n    postsPagination: postsPagination\n  });\n\n  var _useState = useState(postsPagination.next_page),\n      nextPage = _useState[0],\n      setNextPage = _useState[1];\n\n  var _useState2 = useState(postsPagination.results.map(function (post) {\n    return post;\n  })),\n      posts = _useState2[0],\n      setPosts = _useState2[1];\n\n  function handleLoadMorePosts() {\n    return _handleLoadMorePosts.apply(this, arguments);\n  }\n\n  function _handleLoadMorePosts() {\n    _handleLoadMorePosts = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return fetch(nextPage).then(function (results) {\n                return results.json();\n              }).then(function (resultsJson) {\n                setNextPage(resultsJson.next_page);\n                setPosts([].concat(_toConsumableArray(posts), _toConsumableArray(resultsJson.results)));\n              });\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _handleLoadMorePosts.apply(this, arguments);\n  }\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: styles.container,\n    children: [/*#__PURE__*/_jsx(\"img\", {\n      src: \"/images/logo.svg\",\n      alt: \"logo\"\n    }), posts.map(function (post) {\n      return /*#__PURE__*/_jsxs(\"div\", {\n        className: styles.post,\n        children: [/*#__PURE__*/_jsx(Link, {\n          href: \"/post/\".concat(post.uid),\n          children: /*#__PURE__*/_jsx(\"a\", {\n            children: post.data.title\n          })\n        }), /*#__PURE__*/_jsx(\"p\", {\n          children: post.data.subtitle\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          children: [/*#__PURE__*/_jsxs(\"time\", {\n            children: [/*#__PURE__*/_jsx(FiCalendar, {}), format(new Date(post.first_publication_date), 'dd LLL yyyy', {\n              locale: ptBR\n            })]\n          }), /*#__PURE__*/_jsxs(\"span\", {\n            children: [/*#__PURE__*/_jsx(FiUser, {}), post.data.author]\n          })]\n        })]\n      }, post.uid);\n    }), nextPage && /*#__PURE__*/_jsx(\"button\", {\n      type: \"button\",\n      onClick: handleLoadMorePosts,\n      children: \"Carregar mais posts...\"\n    })]\n  });\n}","map":null,"metadata":{},"sourceType":"module"}